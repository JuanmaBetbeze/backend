<app-menu></app-menu>
<div class="container">
  <h1>Dispositivos</h1>
  <table id="customers">
    <thead>
    <tr>
      <th scope="col">Tipo</th>
      <th scope="col">Numero de serie</th>
      <th scope="col">modelo</th>
      <th scope="col">ID</th>
      <th scope="col">marca</th>
      <th scope="col">valor</th>
      <th scope="col">asegurado</th>
      <th scope="col">Estado</th>
      <th scope="col">Historial</th>
      <th scope="col" *ngIf="permitido">Editar</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let dispositivo of dispositivos">
      <td>{{dispositivo.tipo}}</td>
      <td>{{dispositivo.numeroDeSerie}}</td>
      <td>{{dispositivo.modelo}}</td>
      <td>{{dispositivo.idDispo}}</td>
      <td>{{dispositivo.marca}}</td>
      <td>{{dispositivo.valor}}</td>
      <td *ngIf="dispositivo.asegurado">SI</td>
      <td *ngIf="!dispositivo.asegurado">NO</td>
      <td *ngIf="dispositivo.empleadoActual==0">SIN ASIGNAR</td>
      <td *ngIf="dispositivo.empleadoActual!=0">ASIGNADO</td>
      <td> <li>
        <a routerLink="/dispositivos/{{dispositivo.id}}/historial"><i class="fa fa-mobile"></i> Ver</a>
      </li>
      </td>
      <td *ngIf="permitido"><button class="btn btn-outline-success" style="color: green" routerLink="/dispositivos/{{dispositivo.id}}/editar">
        <i class="far fa-edit "style="color: green"></i> Editar</button></td>
    </tr>
    </tbody>
  </table>
  <br>
  <div class="mt-3" *ngIf="permitido">
    <button class="btn btn-outline-success btn-lg" routerLink="/dispositivos/nuevo" style="margin: 10px" >
      <i class="fas fa-plus-circle"></i> Nuevo Dispositivo</button>
  </div>
</div>
<br>
<div class="mt-3">
  <p>Filtrar por:
    <select [(ngModel)]="filtrado">
      <option value="" selected>Seleccione una categoría</option>
      <option value="tipo">Tipo</option>
      <option value="numeroDeSerie">Numero de serie</option>
      <option value="modelo">Modelo</option>
      <option value="idDispo">ID</option>
      <option value="marca">Marca</option>
      <option value="valor">Valor</option>
      <option value="asegurado">Asegurado</option>
      <option value="duenio">Asignado</option>
    </select>
  </p>
</div>
  <p [hidden]="filtrado != 'tipo'">Tipo:
    <select [(ngModel)]="valor" name="tipo" id="tipo" >
      <option selected value="">Seleccione un tipo</option>
      <option [value]="item" *ngFor="let item of tipos">{{item}}</option>
    </select>
  </p>
  <p [hidden]="filtrado != 'numeroDeSerie'">Numero de serie:
    <input [(ngModel)]="valor" type="text" class="form-control" id="numeroDeSerie"
           name="numeroDeSerie" style="width: 250px">
  </p>
<p [hidden]="filtrado != 'modelo'">Modelo:
  <input [(ngModel)]="valor" type="text" class="form-control" id="modelo"
         name="modelo" style="width: 250px">
</p>
<p [hidden]="filtrado != 'idDispo'">ID:
  <input [(ngModel)]="valor" type="text" class="form-control" id="idDispo"
         name="idDispo" style="width: 250px">
</p>
<p [hidden]="filtrado != 'marca'">Marca:
  <select [(ngModel)]="valor" name="tipo" id="marca" >
    <option selected value="">Seleccione una marca</option>
    <option [value]="item" *ngFor="let item of marcas">{{item}}</option>
  </select>
</p>
<p [hidden]="filtrado != 'valor'">Valor:
  <input [(ngModel)]="valor" type="text" class="form-control" id="valor"
         name="valor" style="width: 250px">
</p>
<p [hidden]="filtrado != 'asegurado'">Asegurado:
  <select [(ngModel)]="valor" name="tipo" id="asegurado" >
    <option selected>Seleccione una opción </option>
    <option> SI </option>
    <option> NO </option>
  </select>
</p>
<p [hidden]="filtrado != 'duenio'">Asginado:
  <select [(ngModel)]="valor" name="tipo" id="asignado" >
    <option selected>Seleccione una opción </option>
    <option value="asignado"> Sin asignar </option>
    <option value="sinasignar"> Asignar </option>
  </select>
</p>
<button style="width: 250px" class="btn btn-outline-success btn-block" [disabled]="filtrado=='' || valor==''" (click)="filtrar()">
  <i class="fas fa-plus-circle"></i> Filtrar</button>
